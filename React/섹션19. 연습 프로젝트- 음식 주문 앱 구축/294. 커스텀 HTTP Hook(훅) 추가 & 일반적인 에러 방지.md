ì•„ì£¼ ì˜ ë”°ë¼ì˜¤ì…¨ìŠµë‹ˆë‹¤!  
ì´ë²ˆ ì‹œê°„ì˜ **í•µì‹¬ì€ ì»¤ìŠ¤í…€ HTTP ìš”ì²­ í›…(`useHttp`) êµ¬í˜„ ë° ì ìš©**ì´ì—ˆê³ , ì´ë¥¼ í†µí•´ **ê³µí†µëœ ìš”ì²­ ì²˜ë¦¬ ë¡œì§ì„ ì¬ì‚¬ìš©í•˜ê³ **, **ì—ëŸ¬ í•¸ë“¤ë§ê³¼ ë¡œë”© ìƒíƒœë¥¼ í†µí•© ê´€ë¦¬**í•˜ëŠ” êµ¬ì¡°ë¥¼ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.

---

## âœ… í•µì‹¬ ìš”ì•½: `useHttp` ì»¤ìŠ¤í…€ í›… ë„ì…

### ğŸ¯ ëª©ì 

- ê²°ì œ ì»´í¬ë„ŒíŠ¸ì™€ ìŒì‹ ì»´í¬ë„ŒíŠ¸ **ê³µí†µì˜ HTTP ìš”ì²­ ë¡œì§ ì¬ì‚¬ìš©**
    
- ë¡œë”© ì¤‘, ìš”ì²­ ì„±ê³µ/ì‹¤íŒ¨ ìƒíƒœ ì²˜ë¦¬
    
- ë‹¤ì–‘í•œ ìš”ì²­ ë©”ì„œë“œ(GET/POST ë“±) ëŒ€ì‘
    
- `useEffect`, `useCallback`ìœ¼ë¡œ **ìë™/ìˆ˜ë™ ìš”ì²­ êµ¬ë¶„**
    

---

## ğŸ“ ìµœì¢… êµ¬ì¡° ìš”ì•½

```
src/
â”œâ”€â”€ hooks/
â”‚   â””â”€â”€ useHttp.js
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ Meals/
â”‚   â”‚   â””â”€â”€ Meals.jsx
â”‚   â”œâ”€â”€ Cart/
â”‚   â”‚   â””â”€â”€ Checkout.jsx
â”‚   â””â”€â”€ UI/
â”‚       â””â”€â”€ Input.jsx
â”‚       â””â”€â”€ Modal.jsx
```

---

## ğŸ§  ì»¤ìŠ¤í…€ í›… êµ¬ì¡° ì •ë¦¬: `useHttp.js`

```js
import { useState, useEffect, useCallback } from "react";

async function sendHttpRequest(url, config) {
  const response = await fetch(url, config);

  const data = await response.json();

  if (!response.ok) {
    throw new Error(data.message || "ë¬¸ì œê°€ ìƒê²¼ìŠµë‹ˆë‹¤. ìš”ì²­ì„ ë³´ë‚´ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.");
  }

  return data;
}

export default function useHttp(url, config, initialData = null) {
  const [data, setData] = useState(initialData);
  const [isLoading, setIsLoading] = useState(false);
  const [error, setError] = useState();

  const sendRequest = useCallback(async () => {
    setIsLoading(true);
    setError(null);

    try {
      const resData = await sendHttpRequest(url, config);
      setData(resData);
    } catch (err) {
      setError(err.message || "ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
    }

    setIsLoading(false);
  }, [url, config]);

  useEffect(() => {
    const method = config?.method?.toUpperCase() || "GET";
    if (!config || method === "GET") {
      sendRequest();
    }
  }, [sendRequest, config]);

  return {
    data,
    isLoading,
    error,
    sendRequest,
  };
}
```

---

## ğŸ“Œ ì‚¬ìš© ì˜ˆì‹œ 1: ìŒì‹ ì»´í¬ë„ŒíŠ¸(Meals.jsx)

```js
const requestConfig = {}; // ë¹ˆ ê°ì²´ëŠ” useCallback ì˜ì¡´ì„± ìµœì í™”ìš©

const {
  data: loadedMeals,
  isLoading,
  error,
} = useHttp("http://localhost:3000/meals", requestConfig, []);
```

```jsx
if (isLoading) return <p>ë¡œë”© ì¤‘...</p>;
if (error) return <p>{error}</p>;
if (!loadedMeals || loadedMeals.length === 0) return <p>ìŒì‹ ì—†ìŒ</p>;

return (
  <ul>
    {loadedMeals.map(meal => (
      <MealItem key={meal.id} meal={meal} />
    ))}
  </ul>
);
```

---

## ğŸ“Œ ì‚¬ìš© ì˜ˆì‹œ 2: ê²°ì œ ì»´í¬ë„ŒíŠ¸(Checkout.jsx)

```js
const { isLoading, error, sendRequest } = useHttp(); // ì´ˆê¸° ìš”ì²­ ì—†ìŒ
```

```js
async function handleSubmit(event) {
  event.preventDefault();

  const formData = new FormData(event.target);
  const userDetails = Object.fromEntries(formData.entries());

  await sendRequest(
    "http://localhost:3000/orders",
    {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
      },
      body: JSON.stringify({
        order: {
          items: cartCtx.items,
          customer: userDetails,
        },
      }),
    }
  );
}
```

---

## âš ï¸ ì£¼ì˜í•  ì 

|í•­ëª©|ì´ìœ |
|---|---|
|ë¹ˆ ê°ì²´ `{}`ëŠ” `useEffect` ì˜ì¡´ì„±ì— ì˜í–¥ì„ ì¤Œ|â†’ ì»´í¬ë„ŒíŠ¸ ì¬ì‹¤í–‰ë§ˆë‹¤ ìƒˆ ê°ì²´ê°€ ìƒì„±ë˜ë¯€ë¡œ `useCallback`/`useEffect`ê°€ ë¬´í•œ ë£¨í”„ì— ë¹ ì§|
|`sendRequest`ëŠ” ë°˜ë“œì‹œ `useCallback`ìœ¼ë¡œ ê°ì‹¸ì•¼ í•¨|â†’ í•¨ìˆ˜ ì¬ìƒì„± ë°©ì§€|
|`useEffect`ëŠ” GET ìš”ì²­ì—ë§Œ ìë™ í˜¸ì¶œë˜ë„ë¡ ì œí•œí•´ì•¼ í•¨|â†’ POST ìš”ì²­ì€ ìˆ˜ë™ìœ¼ë¡œ ì‹¤í–‰í•´ì•¼ í•˜ë¯€ë¡œ `method === "GET"` ê²€ì‚¬ í•„ìš”|
|ì´ˆê¸° `data` ì„¤ì •ì´ ì—†ìœ¼ë©´ map ì‹œ `undefined` ì˜¤ë¥˜ ë°œìƒ ê°€ëŠ¥|â†’ `initialData = []` ë“± ì„¤ì •í•´ ë°©ì§€|

---

## âœ… ì´ë²ˆ ë‹¨ê³„ ì™„ì„±ëœ ê¸°ëŠ¥ ìš”ì•½

- ì»¤ìŠ¤í…€ í›… ê¸°ë°˜ HTTP ìš”ì²­ ì²˜ë¦¬ (`useHttp`)
    
- ìš”ì²­ ì¤‘/ì™„ë£Œ/ì—ëŸ¬ ìƒíƒœ ë°˜ì˜
    
- ê²°ì œ ë° ìŒì‹ ìš”ì²­ ë¡œì§ í†µí•©
    
- ë Œë”ë§ íƒ€ì´ë°ê³¼ ì˜ì¡´ì„± ì œì–´
    

---

í•„ìš”í•˜ì‹œë‹¤ë©´ ë‹¤ìŒìœ¼ë¡œ ì´ì–´ì§€ëŠ” ë‹¨ê³„ì¸:

- ì£¼ë¬¸ í›„ ì„±ê³µ ë©”ì‹œì§€/ì• ë‹ˆë©”ì´ì…˜ ì²˜ë¦¬
    
- ì¬ê³  ê°ì†Œ/ìˆ˜ëŸ‰ ë™ê¸°í™”
    
- ì„œë²„ ì‘ë‹µì— ë”°ë¥¸ UI ë¦¬ë””ë ‰ì…˜
    

ë„ í•¨ê»˜ ì´ì–´ì„œ ë„ì™€ë“œë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ê³„ì† ì‘ì—… ë„ì™€ë“œë¦´ê¹Œìš”? ğŸ˜Š