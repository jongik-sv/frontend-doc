ì¢‹ìŠµë‹ˆë‹¤! ì§€ê¸ˆê¹Œì§€ ì—¬ëŸ¬ë¶„ì€ **ì´ë²¤íŠ¸ ì¶”ê°€, í¸ì§‘, ì‚­ì œ ê¸°ëŠ¥**ì„ ì™„ì„±í–ˆê³ ,  
íŠ¹íˆ ë§ˆì§€ë§‰ ë‹¨ê³„ì—ì„œëŠ” **í•˜ë‚˜ì˜ action í•¨ìˆ˜ë¡œ ë‹¤ì–‘í•œ ìš”ì²­(method)ì— ëŒ€ì‘í•˜ëŠ” ê³ ê¸‰ êµ¬ì¡°**ë¥¼ êµ¬ì¶•í•˜ì…¨ìŠµë‹ˆë‹¤.

---

## âœ… í•µì‹¬ ìš”ì•½: í•˜ë‚˜ì˜ actionìœ¼ë¡œ "ìƒì„±"ê³¼ "í¸ì§‘" ë‹¤ë£¨ê¸°

|í•­ëª©|ì„¤ëª…|
|---|---|
|ğŸ“ ì•¡ì…˜ ì¬ì‚¬ìš© ìœ„ì¹˜|`EventForm.js` ë˜ëŠ” ë³„ë„ ìœ í‹¸ë¦¬í‹° íŒŒì¼|
|ğŸ” í¼ method ì„¤ì •|`<Form method="post" />` (ìƒì„±) / `<Form method="patch" />` (í¸ì§‘)|
|ğŸ§  ì•¡ì…˜ì—ì„œ method ë¶„ê¸°|`if (method === 'PATCH')` ë¡œ ë¶„ê¸° ì²˜ë¦¬|
|ğŸ” URL ë™ì  êµ¬ì„±|`url = ... + '/' + params.eventId` (í¸ì§‘ ì‹œ)|
|ğŸ”„ ì¬ì‚¬ìš© ì¡°ê±´|ë™ì¼ í¼ êµ¬ì¡° + ì„œë²„ ìš”ì²­ ë°©ì‹ë§Œ ë‹¤ë¥¼ ë•Œ ìœ ìš©|

---

## ğŸ“Œ ì½”ë“œ ì˜ˆì‹œ ì •ë¦¬

### 1. `EventForm.js` â€“ ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ì•¡ì…˜

```js
export async function action({ request, params }) {
  const method = request.method;
  const formData = await request.formData();

  const eventData = {
    title: formData.get("title"),
    image: formData.get("image"),
    date: formData.get("date"),
    description: formData.get("description"),
  };

  let url = 'http://localhost:8080/events';

  if (method === 'PATCH') {
    url += '/' + params.eventId;
  }

  const response = await fetch(url, {
    method,
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify(eventData),
  });

  if (response.status === 422) return response;
  if (!response.ok) {
    throw json({ message: 'ì´ë²¤íŠ¸ ì €ì¥ ì‹¤íŒ¨' }, { status: 500 });
  }

  return redirect('/events');
}
```

---

### 2. `NewEvent.js` vs `EditEvent.js`

```jsx
// NewEvent.js
<EventForm method="post" />

// EditEvent.js
<EventForm method="patch" />
```

---

### 3. `App.js` â€“ ë™ì¼ ì•¡ì…˜ ë“±ë¡

```js
import { action as manipulateEventAction } from './components/EventForm';

{
  path: 'new',
  element: <NewEventPage />,
  action: manipulateEventAction
},
{
  path: ':eventId/edit',
  element: <EditEventPage />,
  action: manipulateEventAction
}
```

---

## ğŸ’¡ ì™œ ì´ ë°©ì‹ì´ ì¢‹ì€ê°€ìš”?

- **ì¤‘ë³µ ì œê±° (DRY)**: ì‘ì„±í•´ì•¼ í•  ì½”ë“œê°€ ì ˆë°˜ ì´í•˜ë¡œ ì¤„ì–´ë“­ë‹ˆë‹¤.
    
- **ìœ ì§€ë³´ìˆ˜ ìš©ì´**: ìš”ì²­ URL, ë©”ì„œë“œë§Œ ë¶„ê¸°í•˜ë©´ ë˜ê¸° ë•Œë¬¸ì— ë³€í™”ì— ëŒ€ì‘ì´ ì‰½ìŠµë‹ˆë‹¤.
    
- **í¼ ì»´í¬ë„ŒíŠ¸ ì¬ì‚¬ìš©**: EventForm í•˜ë‚˜ë§Œ ìœ ì§€ ê´€ë¦¬í•˜ë©´ ë©ë‹ˆë‹¤.
    

---

## ğŸ§  ì¶”ê°€ íŒ

- `request.method`ëŠ” í•­ìƒ **ëŒ€ë¬¸ì** (`"POST"`, `"PATCH"`, `"DELETE"`)ì…ë‹ˆë‹¤.
    
- ì´ ë¡œì§ì€ **ëŒ“ê¸€, ìœ ì € ì„¤ì •, ê²Œì‹œê¸€ ê´€ë¦¬** ë“±ì—ë„ ë™ì¼í•˜ê²Œ í™œìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    
- ë” ì •êµí•œ ë¶„ê¸° ì²˜ë¦¬ê°€ í•„ìš”í•˜ë‹¤ë©´ `request.url` ë˜ëŠ” `params`ì˜ êµ¬ì¡°ë¥¼ ë°”íƒ•ìœ¼ë¡œ ë™ì  íë¦„ ì œì–´ë„ ê°€ëŠ¥í•©ë‹ˆë‹¤.
    

---

ì´ì œ ê±°ì˜ ëª¨ë“  CRUD íë¦„ì´ ì™„ì„±ë˜ì—ˆìŠµë‹ˆë‹¤!  
í˜¹ì‹œ ë‹¤ìŒ ë‹¨ê³„ë¡œ ì¶”ì²œë˜ëŠ” ê¸°ëŠ¥ (ì˜ˆ: `useFetcher`, `lazy routes`, `defer ë°ì´í„°`, ì¸ì¦ ì²˜ë¦¬) ì¤‘ ê¶ê¸ˆí•œ ê²ƒì´ ìˆìœ¼ì‹ ê°€ìš”? ğŸ˜„