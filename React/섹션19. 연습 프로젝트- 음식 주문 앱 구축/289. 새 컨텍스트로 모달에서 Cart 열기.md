ë¬¼ë¡ ì…ë‹ˆë‹¤! ğŸ˜Š  
ì•„ë˜ëŠ” ì§€ê¸ˆê¹Œì§€ì˜ ê°•ì˜ ë‚´ìš©ì„ ë¹ ì§ì—†ì´ êµ¬ì¡°í™”í•˜ê³  ì •ë¦¬í•œ **ì¥ë°”êµ¬ë‹ˆ ëª¨ë‹¬ í‘œì‹œ ê¸°ëŠ¥ êµ¬í˜„ ìš”ì•½ ë° ì½”ë“œ êµ¬ì¡° ì•ˆë‚´**ì…ë‹ˆë‹¤.

---

## âœ… ì£¼ìš” êµ¬í˜„ ëª©í‘œ ìš”ì•½

1. **ì¥ë°”êµ¬ë‹ˆë¥¼ ëª¨ë‹¬ë¡œ ì¶œë ¥**
    
2. **ëª¨ë‹¬ open ì—¬ë¶€ë¥¼ ì „ì—­ ìƒíƒœ(`UserProgressContext`)ë¡œ ê´€ë¦¬**
    
3. **í—¤ë” ë²„íŠ¼ í´ë¦­ ì‹œ ëª¨ë‹¬ì´ ëœ¨ê³ , ë²„íŠ¼ìœ¼ë¡œ ë‹«í˜**
    
4. **ë¦¬ì•¡íŠ¸ Portalì„ í†µí•œ ëª¨ë‹¬ ì¶œë ¥**
    
5. **ëª¨ë‹¬ ë‚´ë¶€ ì½˜í…ì¸  êµ¬ì„± (í•­ëª© + ì´ ê¸ˆì•¡ + ë²„íŠ¼)**
    

---

## ğŸ“¦ íŒŒì¼ êµ¬ì¡° ì˜ˆì‹œ (ì¶”ì²œ í´ë” êµ¬ì¡°)

```
src/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ Cart/
â”‚   â”‚   â”œâ”€â”€ Cart.jsx
â”‚   â”œâ”€â”€ Meals/
â”‚   â”‚   â”œâ”€â”€ Meals.jsx
â”‚   â”‚   â”œâ”€â”€ MealItem.jsx
â”‚   â”œâ”€â”€ UI/
â”‚   â”‚   â”œâ”€â”€ Modal.jsx
â”‚   â”‚   â”œâ”€â”€ Button.jsx
â”‚   â”œâ”€â”€ Header.jsx
â”œâ”€â”€ store/
â”‚   â”œâ”€â”€ CartContext.jsx
â”‚   â”œâ”€â”€ UserProgressContext.jsx
â”œâ”€â”€ util/
â”‚   â”œâ”€â”€ formatting.js
```

---

## ğŸ§  ì „ì—­ ì»¨í…ìŠ¤íŠ¸ ê´€ë¦¬

### 1. `CartContext.jsx`

- `useReducer`ë¡œ ì¥ë°”êµ¬ë‹ˆ í•­ëª© ì¶”ê°€/ì‚­ì œ ê´€ë¦¬
    
- `addItem()`, `removeItem()` í•¨ìˆ˜ ì œê³µ
    
- í•­ëª© ìˆ˜ëŸ‰ ì¦ê°€/ê°ì†Œ ë˜ëŠ” ì œê±° ë¡œì§ í¬í•¨
    

### 2. `UserProgressContext.jsx`

- ìƒíƒœ: `userProgress` (`''`, `'cart'`, `'checkout'`)
    
- ë©”ì„œë“œ:
    
    - `showCart()`, `hideCart()`
        
    - `showCheckout()`, `hideCheckout()`
        
- ëª¨ë‹¬ í‘œì‹œ/ìˆ¨ê¹€ ê²°ì •ìš©
```jsx
import { createContext, useState } from "react";

const UserProgressContext = createContext({
  progress: "",
  showCart: () => {},
  hideCart: () => {},
  showCheckout: () => {},
  hideCheckout: () => {},
});

export function UserProgressContextProvider({ children }) {
  const [userProgress, setUserProgress] = useState("");
  function showCart() {
    setUserProgress("cart");
  }

  function hideCart() {
    setUserProgress("");
  }

  function showCheckout() {
    setUserProgress("checkout");
  }

  function hideCheckout() {
    setUserProgress("");
  }

  const userProgressCtx = {
    progress: userProgress,
    showCart,
    hideCart,
    showCheckout,
    hideCheckout,
  };
  return (
    <UserProgressContext value={userProgressCtx}>{children}</UserProgressContext>
  );
}

export default UserProgressContext;
 
```

---

## ğŸ–¼ï¸ ëª¨ë‹¬ ì»´í¬ë„ŒíŠ¸ (`Modal.jsx`)

- `createPortal()` ì‚¬ìš©, `#modal` IDë¡œ ë Œë”ë§
    
- `useRef` + `useEffect` í™œìš©:
    
    - `open === true` âœ `showModal()`
        
    - `open === false` âœ `close()` (cleanup í•¨ìˆ˜)
        
- ì™¸ë¶€ì—ì„œ `className`, `children` ì „ë‹¬ ê°€ëŠ¥
    

```jsx
import { useRef, useEffect } from "react";
import { createPortal } from "react-dom";

export default function Modal({ open, className = "", children }) {
  const dialogRef = useRef();
  
  useEffect(() => {
    const dialog = dialogRef.current;
    if (open) dialog.showModal();
    return () => {
      if (dialog) dialog.close();
    };
  }, [open]);

  return createPortal(
    <dialog ref={dialogRef} className={`modal ${className}`}>
      {children}
    </dialog>,
    document.getElementById("modal")
  );
}
```

---

## ğŸ›’ ì¥ë°”êµ¬ë‹ˆ ì»´í¬ë„ŒíŠ¸ (`Cart.jsx`)

```jsx
import { useContext } from "react";
import Modal from "../UI/Modal";
import Button from "../UI/Button";
import CartContext from "../../store/CartContext";
import UserProgressContext from "../../store/UserProgressContext";
import { currencyFormatter } from "../../util/formatting";

export default function Cart() {
  const cartCtx = useContext(CartContext);
  const userProgressCtx = useContext(UserProgressContext);
  const isOpen = userProgressCtx.progress === "cart";

  const cartTotal = cartCtx.items.reduce((total, item) => {
    return total + item.price * item.quantity;
  }, 0);

  function handleCloseCart() {
    userProgressCtx.hideCart();
  }

  return (
    <Modal open={isOpen} className="cart">
      <h2>ì¥ë°”êµ¬ë‹ˆ</h2>
      <ul>
        {cartCtx.items.map((item) => (
          <li key={item.id}>
            {item.name} - {item.quantity}
          </li>
        ))}
      </ul>
      <p className="cart-total">{currencyFormatter.format(cartTotal)}</p>
      <p className="modal-actions">
        <Button textOnly onClick={handleCloseCart}>ë‹«ê¸°</Button>
        <Button onClick={handleCloseCart}>ê²°ì œí•˜ê¸°</Button>
      </p>
    </Modal>
  );
}
```

---

## ğŸ” ì•±ì—ì„œ ëª¨ë‹¬ ìƒíƒœ ê´€ë¦¬ íë¦„

### ğŸ“ `Header.jsx` ë‚´ Cart ë²„íŠ¼

```jsx
import { useContext } from "react";
import UserProgressContext from "../store/UserProgressContext";
import Button from "./UI/Button";

export default function Header() {
  const userProgressCtx = useContext(UserProgressContext);
  
  function handleShowCart() {
    userProgressCtx.showCart();
  }

  return (
    <header id="main-header">
      <div id="title">
        <img src="logo.png" alt="ReactFood" />
        <h1>ReactFood</h1>
      </div>
      <nav>
        <Button textOnly onClick={handleShowCart}>ì¥ë°”êµ¬ë‹ˆ</Button>
      </nav>
    </header>
  );
}
```

---

## ğŸ§± `App.jsx`ì— Provider ë° ì»´í¬ë„ŒíŠ¸ ì‚½ì…

```jsx
import Cart from "./components/Cart/Cart";
import Header from "./components/Header";
import Meals from "./components/Meals/Meals";
import CartContextProvider from "./store/CartContext";
import UserProgressContextProvider from "./store/UserProgressContext";

function App() {
  return (
    <UserProgressContextProvider>
      <CartContextProvider>
        <Cart />
        <Header />
        <Meals />
      </CartContextProvider>
    </UserProgressContextProvider>
  );
}
```

---

## âœ¨ ë§ˆë¬´ë¦¬ ìš”ì•½

- ì‚¬ìš©ì ê²½í—˜ íë¦„(User Progress)ì„ ì»¨í…ìŠ¤íŠ¸ë¡œ ë¶„ë¦¬
    
- `Cart` ì»´í¬ë„ŒíŠ¸ë¥¼ ëª¨ë‹¬ë¡œ ê´€ë¦¬í•˜ë©° ì–¸ì œë“  ì—´ê³  ë‹«ê¸° ê°€ëŠ¥
    
- ë²„íŠ¼ ì´ë²¤íŠ¸ì™€ ìƒíƒœ ë³€í™”ê°€ ìì—°ìŠ¤ëŸ½ê²Œ ì—°ê²°
    
- Portal, Context, Reducer ë“± React ê³ ê¸‰ íŒ¨í„´ì„ ì‹¤ì „ í™œìš©
    

---

## ğŸ”œ ë‹¤ìŒ ëª©í‘œ

1. ì¥ë°”êµ¬ë‹ˆ í•­ëª©ì— ìˆ˜ëŸ‰ ì¡°ì ˆ ë²„íŠ¼ ì¶”ê°€ (`+`, `-`)
    
2. `Go to Checkout` í´ë¦­ ì‹œ ê²°ì œ í™”ë©´ ì „í™˜
    
3. ê²°ì œ í¼ êµ¬ì„± ë° ì „ì†¡ ì²˜ë¦¬
    

---

í•„ìš”í•˜ì‹œë©´ ì´ì–´ì§€ëŠ” ë‹¨ê³„ë„ ê³„ì† êµ¬ì¡°í™”í•´ ë“œë¦´ê²Œìš”. ì¤€ë¹„ë˜ì…¨ë‚˜ìš”? ğŸ˜„