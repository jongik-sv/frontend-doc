ë¬¼ë¡ ì´ì£ ! ì•„ë˜ëŠ” ì—¬ëŸ¬ë¶„ì´ ì‘ì„±í•œ `useFetch` ì»¤ìŠ¤í…€ í›…ì„ í™œìš©í•˜ì—¬ **ì‚¬ìš©ì ìœ„ì¹˜ ê¸°ë°˜ ì •ë ¬ê¹Œì§€ í†µí•©ì ìœ¼ë¡œ ì²˜ë¦¬**í•œ ì˜ˆì‹œë¥¼ ì¤‘ì‹¬ìœ¼ë¡œ í•œ **ë¸”ë¡œê·¸ ê¸€ í˜•ì‹ì˜ ì •ë¦¬**ì…ë‹ˆë‹¤. í•µì‹¬ ê°œë…ì€ **ì»¤ìŠ¤í…€ í›… + ì •ë ¬ ë¡œì§ì˜ í†µí•©**, ê·¸ë¦¬ê³  **Promise íŒ¨í„´ì˜ í™•ì¥ ì‚¬ìš©**ì…ë‹ˆë‹¤.

---

# ğŸ“ ì‚¬ìš©ì ìœ„ì¹˜ ê¸°ë°˜ ì •ë ¬ê¹Œì§€ ê°€ëŠ¥í•œ ì»¤ìŠ¤í…€ í›…: useFetch + ì •ë ¬ ë¡œì§ ê²°í•©í•˜ê¸°

ì•ì„œ ìš°ë¦¬ëŠ” `useFetch`ë¼ëŠ” ì»¤ìŠ¤í…€ í›…ì„ í†µí•´ ì»´í¬ë„ŒíŠ¸ì˜ ë°ì´í„° fetching ë¡œì§ì„ **ê¹”ë”í•˜ê²Œ ì¶”ìƒí™”**í–ˆìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´ `App.jsx`, `AvailablePlaces.jsx` ë“± ì—¬ëŸ¬ ì»´í¬ë„ŒíŠ¸ì—ì„œ **ê³µí†µì ìœ¼ë¡œ ì“°ì´ëŠ” ë¡œë”©/ì—ëŸ¬/ë°ì´í„° ìƒíƒœ ê´€ë¦¬**ë¥¼ ë‹¨ìˆœí™”í•  ìˆ˜ ìˆì—ˆì£ .

í•˜ì§€ë§Œ ì—¬ê¸°ì— **í•œ ê°€ì§€ ì¶”ê°€ì ì¸ ìš”êµ¬ì‚¬í•­**ì´ ìƒê²¼ìŠµë‹ˆë‹¤.

> "ì‚¬ìš©ìì˜ í˜„ì¬ ìœ„ì¹˜ë¥¼ ê¸°ë°˜ìœ¼ë¡œ, ì¥ì†Œë“¤ì„ ê°€ê¹Œìš´ ìˆœìœ¼ë¡œ ì •ë ¬í•˜ê³  ì‹¶ë‹¤."

ì´ ìš”êµ¬ì‚¬í•­ì€ ë‹¨ìˆœí•œ HTTP ìš”ì²­ë§Œìœ¼ë¡œ í•´ê²°ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì‚¬ìš©ìì˜ ìœ„ì¹˜ëŠ” ë¸Œë¼ìš°ì €ì˜ `navigator.geolocation` APIë¥¼ í†µí•´ ì–»ì„ ìˆ˜ ìˆê³ , ì´ëŠ” **ì½œë°± ê¸°ë°˜ API**ì´ê¸° ë•Œë¬¸ì— **ë¹„ë™ê¸° í•¨ìˆ˜ì™€ ìì—°ìŠ¤ëŸ½ê²Œ ì—°ê²°ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.**

## âœ… ëª©í‘œ

- `fetchAvailablePlaces()`ë¡œ ì¥ì†Œ ëª©ë¡ì„ ê°€ì ¸ì˜¨ í›„
    
- ì‚¬ìš©ìì˜ ìœ„ì¹˜ë¥¼ ì–»ê³ 
    
- ê±°ë¦¬ ê¸°ë°˜ìœ¼ë¡œ ì •ë ¬í•œ ê²°ê³¼ë¥¼ ë°˜í™˜
    
- ì´ ëª¨ë“  ì‘ì—…ì„ **ì»¤ìŠ¤í…€ í›…ì˜ fetch í•¨ìˆ˜ ì•ˆì—ì„œ ì²˜ë¦¬**
    

---

## ğŸ§  í•´ê²° ì „ëµ: ì •ë ¬ ë¡œì§ì„ í¬í•¨í•œ fetch í•¨ìˆ˜ ë§Œë“¤ê¸°

ìš°ë¦¬ëŠ” ìƒˆë¡œìš´ fetch í•¨ìˆ˜ì¸ `fetchSortedPlaces`ë¥¼ ì •ì˜í–ˆìŠµë‹ˆë‹¤. ì´ í•¨ìˆ˜ëŠ” ë‹¤ìŒì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.

1. ì¥ì†Œ ë°ì´í„°ë¥¼ fetch
    
2. ì‚¬ìš©ìì˜ ìœ„ì¹˜ë¥¼ ë¹„ë™ê¸°ì ìœ¼ë¡œ ì–»ìŒ
    
3. ìœ„ì¹˜ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ê±°ë¦¬ ê³„ì‚° ë° ì •ë ¬
    
4. ì •ë ¬ëœ ì¥ì†Œ ë¦¬ìŠ¤íŠ¸ë¥¼ ë¦¬í„´
    

```js
import { fetchAvailablePlaces } from '../http.js';
import { sortPlacesByDistance } from '../loc.js';

export async function fetchSortedPlaces() {
  const places = await fetchAvailablePlaces();

  const position = await new Promise((resolve, reject) => {
    navigator.geolocation.getCurrentPosition(resolve, reject);
  });

  const sortedPlaces = sortPlacesByDistance(
    places,
    position.coords.latitude,
    position.coords.longitude
  );

  return sortedPlaces;
}
```

### ğŸ’¡ í¬ì¸íŠ¸ ì„¤ëª…

- `navigator.geolocation.getCurrentPosition()`ì€ **ì½œë°± ê¸°ë°˜ API**ì…ë‹ˆë‹¤. ì´ë¥¼ `Promise`ë¡œ ë˜í•‘(wrapping)í•¨ìœ¼ë¡œì¨ `await` êµ¬ë¬¸ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í–ˆìŠµë‹ˆë‹¤.
    
- `resolve()`ë¡œ ìœ„ì¹˜ë¥¼ ë°˜í™˜í•œ í›„, ë°›ì€ ì¢Œí‘œë¥¼ ê¸°ë°˜ìœ¼ë¡œ ê±°ë¦¬ ê³„ì‚°ì„ ìˆ˜í–‰í–ˆìŠµë‹ˆë‹¤.
    
- ì •ë ¬ í•¨ìˆ˜ì¸ `sortPlacesByDistance()`ëŠ” `loc.js`ì— ì´ë¯¸ ì •ì˜ë˜ì–´ ìˆìœ¼ë©°, ë‘ ìœ„ì¹˜ ê°„ ê±°ë¦¬ë¥¼ ê³„ì‚°í•´ ë¹„êµ ì •ë ¬í•©ë‹ˆë‹¤.
    

---

## ğŸ“¦ AvailablePlaces ì»´í¬ë„ŒíŠ¸ì— ì ìš©í•˜ê¸°

ì´ì œ ì´ ì •ë ¬ëœ ë°ì´í„°ë¥¼ ì»¤ìŠ¤í…€ í›…ìœ¼ë¡œ ê°€ì ¸ì˜¤ë©´ ë©ë‹ˆë‹¤.

```js
import useFetch from '../hooks/useFetch.js';
import { fetchSortedPlaces } from '../http.js';

export default function AvailablePlaces({ onSelectPlace }) {
  const { isFetching, error, fetchedData: availablePlaces } = useFetch(fetchSortedPlaces, []);

  if (error) {
    return <Error title="An error occurred!" message={error.message} />;
  }

  return (
    <Places
      title="Available Places"
      places={availablePlaces}
      isLoading={isFetching}
      loadingText="Fetching place data..."
      fallbackText="No places available."
      onSelectPlace={onSelectPlace}
    />
  );
}
```

### âœ… ë°”ë€ ì 

- `fetchSortedPlaces`ë¥¼ ì§ì ‘ fetch í•¨ìˆ˜ë¡œ ë„˜ê²¼ê¸° ë•Œë¬¸ì— `useFetch` ë‚´ë¶€ì—ì„œ **ë°ì´í„° ì •ë ¬ê¹Œì§€ ìˆ˜í–‰**ë©ë‹ˆë‹¤.
    
- ë” ì´ìƒ `useEffect`, `useState`, `setAvailablePlaces` ë“±ì„ ì»´í¬ë„ŒíŠ¸ì— ì§ì ‘ ì‘ì„±í•  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤.
    
- ì»´í¬ë„ŒíŠ¸ëŠ” ì´ì œ "ì •ë ¬ëœ ë°ì´í„°ê°€ ë¡œë”© ì¤‘ì¸ì§€ ì—¬ë¶€"ì™€ "ì—ëŸ¬ ì—¬ë¶€", ê·¸ë¦¬ê³  "ê²°ê³¼ ë°ì´í„°"ë§Œ ë°›ì•„ì„œ **ë‹¨ìˆœíˆ ë³´ì—¬ì£¼ëŠ” ì—­í• **ë§Œ ìˆ˜í–‰í•©ë‹ˆë‹¤.
    

---

## ğŸ’ ì¥ì  ìš”ì•½

|í•­ëª©|ê¸°ì¡´ ë°©ì‹|ì»¤ìŠ¤í…€ í›… + ì •ë ¬ ë¡œì§ í†µí•© í›„|
|---|---|---|
|ì½”ë“œ ìœ„ì¹˜|ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì— `useEffect`, `geolocation`|ëª¨ë‘ í›… ë‚´ë¶€ë¡œ ì´ë™|
|ì¬ì‚¬ìš©ì„±|ë‚®ìŒ|ë†’ìŒ|
|ìœ ì§€ë³´ìˆ˜ì„±|ê° ì»´í¬ë„ŒíŠ¸ë§ˆë‹¤ fetch/ì •ë ¬ ë¡œì§ ë³µì œ|fetch í•¨ìˆ˜ë§Œ ë°”ê¾¸ë©´ ë|
|í…ŒìŠ¤íŠ¸ ê°€ëŠ¥ì„±|ì–´ë ¤ì›€|fetch í•¨ìˆ˜ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥|
|ì‚¬ìš©ì ìœ„ì¹˜ ì‚¬ìš©|ë³µì¡í•œ ì½œë°± íŒ¨í„´|Promise ê¸°ë°˜ìœ¼ë¡œ ë‹¨ìˆœí™”|

---

## ğŸ“Œ ë§ˆë¬´ë¦¬í•˜ë©°

ì´ë²ˆ ê³¼ì •ì—ì„œëŠ” ë‹¨ìˆœíˆ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” fetch í•¨ìˆ˜ë¿ ì•„ë‹ˆë¼, **ì‚¬ìš©ì ìœ„ì¹˜ ê¸°ë°˜ì˜ ì •ë ¬ ë¡œì§ê¹Œì§€ í¬í•¨**í•˜ì—¬ ì»¤ìŠ¤í…€ í›…ì˜ í™•ì¥ì„±ê³¼ ìœ ì—°ì„±ì„ í™•ì¸í•´ë³´ì•˜ìŠµë‹ˆë‹¤.

ì´ì œ `useFetch` í›…ì€ ë‹¤ìŒì„ ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

- GET ìš”ì²­ê³¼ ë°ì´í„° fetch
    
- fetch ì‹¤íŒ¨ ì‹œ ì—ëŸ¬ ì²˜ë¦¬
    
- ë¡œë”© ìƒíƒœ í‘œì‹œ
    
- ì‚¬ìš©ì ìœ„ì¹˜ ê¸°ë°˜ ì •ë ¬
    
- ë°ì´í„°ë¥¼ ë‹¤ì–‘í•œ ì»´í¬ë„ŒíŠ¸ì—ì„œ ë…ë¦½ì ìœ¼ë¡œ ì‚¬ìš© ê°€ëŠ¥
    

ì´ì œ ë‹¤ìŒ ë‹¨ê³„ëŠ”â€¦?

> **`useFetch` í›…ì„ POST/PUT ìš”ì²­ì—ë„ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í™•ì¥**í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤! ë‹¤ìŒ ê¸€ì—ì„œ ì´ì–´ì„œ ë‹¤ë¤„ë³´ê² ìŠµë‹ˆë‹¤. ğŸ˜‰

---

í•„ìš”í•˜ì‹  ê²½ìš°, `fetchSortedPlaces`, `sortPlacesByDistance`, `useFetch.js`ì˜ ì „ì²´ ì½”ë“œë¥¼ ì½”ë“œë¸”ë¡ìœ¼ë¡œ ì •ë¦¬í•´ë“œë¦´ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ìš”ì²­í•´ì£¼ì„¸ìš”!