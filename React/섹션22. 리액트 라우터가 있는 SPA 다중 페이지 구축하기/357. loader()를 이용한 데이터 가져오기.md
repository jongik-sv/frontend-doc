ì¢‹ìŠµë‹ˆë‹¤!  
ì£¼ì‹  ìš”ì²­ì‚¬í•­ì„ ë°”íƒ•ìœ¼ë¡œ **ë¸”ë¡œê·¸ ìŠ¤íƒ€ì¼**ë¡œ,  
**ë” ì²´ê³„ì ì´ê³  ëª…í™•í•œ íë¦„**ìœ¼ë¡œ ì •ë¦¬í•˜ì—¬ ë‹¤ì‹œ ì‘ì„±í•´ë“œë¦¬ê² ìŠµë‹ˆë‹¤. âœï¸ğŸš€

---

# ğŸŒŸ ë¦¬ì•¡íŠ¸ ë¼ìš°í„° ê³ ê¸‰ ê¸°ëŠ¥: `loader`ë¥¼ í™œìš©í•œ í˜„ëŒ€ì  ë°ì´í„° ë¡œë”© ì™„ì „ ì´í•´í•˜ê¸°

## âœ¨ ë“¤ì–´ê°€ë©°

React Routerë¥¼ ì‚¬ìš©í•˜ë©´ ë‹¨ìˆœíˆ **í˜ì´ì§€ ì´ë™**ë§Œì´ ì•„ë‹ˆë¼,  
**í˜ì´ì§€ì— í•„ìš”í•œ ë°ì´í„°ê¹Œì§€ ì‚¬ì „ì— ê°€ì ¸ì™€ì„œ** ì‚¬ìš©ì ê²½í—˜(UX)ì„ í•œì¸µ ë” ë†’ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì´ë²ˆ í¬ìŠ¤íŠ¸ì—ì„œëŠ”

- ê¸°ì¡´ ë°©ì‹ (useEffect + fetch)
    
- ìƒˆë¡œìš´ ë°©ì‹ (ë¼ìš°í„°ì˜ loader ì‚¬ìš©)
    

ì„ ë¹„êµí•˜ë©°,  
**ë¦¬ì•¡íŠ¸ ë¼ìš°í„°ì˜ ê³ ê¸‰ ë°ì´í„° íŒ¨ì¹­ íŒ¨í„´**ì„  
ì´ˆë³´ìë„ ì´í•´í•  ìˆ˜ ìˆë„ë¡ ì°¨ê·¼ì°¨ê·¼ ì„¤ëª…ë“œë¦¬ê² ìŠµë‹ˆë‹¤! ğŸš€

---

# ğŸ› ï¸ Step 1. ê¸°ì¡´ ë°©ì‹: useEffectë¡œ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°

ê³¼ê±°ì—ëŠ” ëŒ€ë¶€ë¶„ ì´ë ‡ê²Œ ì‘ì„±í–ˆì„ ê²ë‹ˆë‹¤.

**Events.js ì˜ˆì‹œ**

```javascript
import { useEffect, useState } from 'react';
import EventsList from '../components/EventsList';

function EventsPage() {
  const [isLoading, setIsLoading] = useState(false);
  const [fetchedEvents, setFetchedEvents] = useState();
  const [error, setError] = useState();

  useEffect(() => {
    async function fetchEvents() {
      setIsLoading(true);
      const response = await fetch('http://localhost:8080/events');
      if (!response.ok) {
        setError('ì´ë²¤íŠ¸ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
        setIsLoading(false);
        return;
      }
      const resData = await response.json();
      setFetchedEvents(resData.events);
      setIsLoading(false);
    }
    fetchEvents();
  }, []);

  if (isLoading) return <p>Loading...</p>;
  if (error) return <p>{error}</p>;
  if (!fetchedEvents) return <p>No events found.</p>;

  return <EventsList events={fetchedEvents} />;
}

export default EventsPage;
```

### âœ… ê¸°ì¡´ ë°©ì‹ì˜ ë¬¸ì œì 

| í•­ëª©        | ë¬¸ì œ                                     |
| :-------- | :------------------------------------- |
| ìƒíƒœ ê´€ë¦¬ í•„ìš”  | useStateë¡œ isLoading, error, data ê°ê° ì„ ì–¸ |
| ë³µì¡ì„± ì¦ê°€    | useEffect ì•ˆì— ë¹„ë™ê¸° ë¡œì§ ì‘ì„± í•„ìš”              |
| ì‚¬ìš©ì ê²½í—˜ ì €í•˜ | í˜ì´ì§€ ì „í™˜ í›„ ë°ì´í„° ìš”ì²­ ì‹œì‘ â†’ ë¡œë”© ëŒ€ê¸° í•„ìš”          |
| ì½”ë“œ ì¤‘ë³µ     | ì—¬ëŸ¬ í˜ì´ì§€ë§ˆë‹¤ ë¹„ìŠ·í•œ ë¡œë”©/ì—ëŸ¬ í•¸ë“¤ë§ ë°˜ë³µ              |

---

# ğŸš€ Step 2. ë¦¬ì•¡íŠ¸ ë¼ìš°í„°ì˜ í˜ì‹ : `loader` í•¨ìˆ˜

React Router v6ë¶€í„°  
**ë¼ìš°íŠ¸ ì •ì˜ ë‹¨ê³„ì—ì„œ ë°ì´í„° íŒ¨ì¹­**ì„ ì§€ì›í•©ë‹ˆë‹¤.

**loaderë€?**

> "ë¼ìš°íŠ¸ê°€ ë Œë”ë§ë˜ê¸° ì „ì— ì‹¤í–‰ë˜ì–´, í•„ìš”í•œ ë°ì´í„°ë¥¼ ë¯¸ë¦¬ ê°€ì ¸ì˜¤ëŠ” ë¹„ë™ê¸° í•¨ìˆ˜"

âœ… `async` í•¨ìˆ˜ë¡œ ì‘ì„±  
âœ… Promiseë¥¼ ë°˜í™˜  
âœ… ì»´í¬ë„ŒíŠ¸ì—ì„œëŠ” `useLoaderData()`ë¡œ ë°ì´í„° ì ‘ê·¼

---

# ğŸ›¤ï¸ Step 3. ì½”ë“œë¡œ ë¹„êµí•´ë³´ê¸°

### 1. App.jsì—ì„œ loader ì—°ê²°

```javascript
import { RouterProvider, createBrowserRouter } from 'react-router-dom';
import HomePage from './pages/Home';
import EventsPages from './pages/Events';
import EventDetailPage from './pages/EventDetail';
import NewEventPage from './pages/NewEvent';
import EditEventPage from './pages/EditEvent';
import RootLayout from './pages/Root';
import EventsRootLayout from './pages/EventsRoot';

const router = createBrowserRouter([
  {
    path: '/',
    element: <RootLayout />,
    children: [
      { index: true, element: <HomePage /> },
      {
        path: 'events',
        element: <EventsRootLayout />,
        children: [
          {
            index: true,
            element: <EventsPages />,
            loader: async () => {
              const response = await fetch('http://localhost:8080/events');

              if (!response.ok) {
                // setError('Fetching events failed.');
              } else {
                const resData = await response.json();
                // setFetchedEvents(resData.events);
                return resData.events;
              }
            },
          },
          { path: 'new', element: <NewEventPage /> },
          { path: ':eventId', element: <EventDetailPage /> },
          { path: ':eventId/edit', element: <EditEventPage /> },
        ],
      },
    ],
  },
]);
function App() {
  return <RouterProvider router={router} />;
}

export default App;
```

âœ… `loader` í”„ë¡œí¼í‹°ë¡œ `eventsLoader` í•¨ìˆ˜ ì—°ê²°!

---

### 2. Events.jsì—ì„œ loader í•¨ìˆ˜ ë¶„ë¦¬

```javascript
import { useLoaderData } from 'react-router-dom';

import EventsList from '../components/EventsList';

function EventsPage() {
  const events = useLoaderData();
  return <EventsList events={events} />;
}

export default EventsPage;

```

âœ… ì»´í¬ë„ŒíŠ¸ëŠ” **ë Œë”ë§ì—ë§Œ ì§‘ì¤‘**  
âœ… ë°ì´í„° ë¡œë”©, ì—ëŸ¬ í•¸ë“¤ë§ì€ **ë¼ìš°í„° ë ˆë²¨**ì—ì„œ ê´€ë¦¬

---

# ğŸ“š Step 4. loader ì‚¬ìš©ì˜ 4ëŒ€ ì¥ì 

|í•­ëª©|ì„¤ëª…|
|:--|:--|
|í˜ì´ì§€ ì´ë™ê³¼ ë™ì‹œì— ë°ì´í„° ìš”ì²­|ì‚¬ìš©ìê°€ ê²½ë¡œ ì´ë™í•˜ë©´ ë°ì´í„°ë„ ì¦‰ì‹œ ìš”ì²­ë¨|
|ë¡œë”© ìƒíƒœ ìë™ ê´€ë¦¬|RouterProviderê°€ ìë™ìœ¼ë¡œ fallback UI ì œê³µ|
|ì—ëŸ¬ í•¸ë“¤ë§ ì¼ê´€ì„±|loader ì•ˆì—ì„œ throwí•œ ì—ëŸ¬ëŠ” ì—ëŸ¬ í˜ì´ì§€ë¡œ ì—°ê²°|
|ì»´í¬ë„ŒíŠ¸ ê°„ê²°ì„±|useEffect, useState ì—†ì´ ë Œë”ë§ ë¡œì§ì— ì§‘ì¤‘ ê°€ëŠ¥|

---

# ğŸ”¥ Step 5. ë°ì´í„° ì „ë‹¬ ë°©ì‹ ë³€í™”

### ê¸°ì¡´ ë°©ì‹

- ì»´í¬ë„ŒíŠ¸ ì•ˆì—ì„œ fetch â†’ useState â†’ useEffect â†’ ë°ì´í„° ì‚¬ìš©
    

### loader ë°©ì‹

- loader í•¨ìˆ˜ì—ì„œ ë°ì´í„° ë¯¸ë¦¬ ë¡œë”©
    
- ì»´í¬ë„ŒíŠ¸ì—ì„œëŠ” `useLoaderData()`ë¡œ ë°”ë¡œ ë°ì´í„° ì ‘ê·¼
    

**ê°„ê²°í•œ ì‚¬ìš© ì˜ˆì‹œ**

```javascript
const events = useLoaderData();
```

âœ… props ì „ë‹¬ í•„ìš” ì—†ìŒ  
âœ… Context API ì‚¬ìš©í•  í•„ìš”ë„ ì—†ìŒ

---

# ğŸ—ï¸ í˜„ì¬ í”„ë¡œì íŠ¸ êµ¬ì¡°ì™€ ì—°ê²°

|íŒŒì¼|ì„¤ëª…|
|:--|:--|
|`src/pages/Events.js`|loaderë¡œ ì´ë²¤íŠ¸ ë¦¬ìŠ¤íŠ¸ ë¡œë”©|
|`src/components/EventsList.js`|ì´ë²¤íŠ¸ ë¦¬ìŠ¤íŠ¸ ë Œë”ë§ ì»´í¬ë„ŒíŠ¸|
|`src/App.js`|ë¼ìš°íŠ¸ ì •ì˜ ë° loader ì—°ê²°|

âœ… ì´ êµ¬ì¡°ë¡œ í”„ë¡œì íŠ¸ë¥¼ ì •ë¦¬í•˜ë©´  
âœ… **ë°ì´í„° íŒ¨ì¹­ ë¡œì§**ê³¼ **ì»´í¬ë„ŒíŠ¸ ë Œë”ë§ ë¡œì§**ì´ ê¹”ë”í•˜ê²Œ ë¶„ë¦¬ë©ë‹ˆë‹¤.

---

# ğŸ¯ ê²°ë¡ : í˜„ëŒ€ì ì¸ ë°ì´í„° ë¡œë”© ë°©ì‹

> "ë” ì´ìƒ useEffect ì•ˆì—ì„œ fetch ì“°ì§€ ë§ˆì„¸ìš”."

React Routerì˜ **loader**ë¥¼ ì‚¬ìš©í•˜ë©´:

- í˜ì´ì§€ ì§„ì… ì‹œ ìì—°ìŠ¤ëŸ½ê²Œ ë°ì´í„°ê°€ ì¤€ë¹„ë˜ê³ 
    
- ê°œë°œìëŠ” ë³µì¡í•œ ìƒíƒœ ê´€ë¦¬ë¥¼ ê±±ì •í•  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤.
    

---

# ğŸ”¥ ë‹¤ìŒ í¬ìŠ¤íŠ¸ ì˜ˆê³ 

ë‹¤ìŒì—ëŠ”

- **í¼ ì œì¶œì„ ì²˜ë¦¬í•˜ëŠ” Action í•¨ìˆ˜**
    
- **deferred ë°ì´í„° íŒ¨ì¹­ (ë¹„ë™ê¸° ë³‘ë ¬ ë¡œë”©)**  
    ì„ ì‹¬í™” í•™ìŠµí•  ì˜ˆì •ì…ë‹ˆë‹¤.
    

---

**ë‹¤ìŒì—ë„ ë¸”ë¡œê·¸ ìŠ¤íƒ€ì¼ë¡œ ì´ì–´ì„œ ì„¤ëª…í•´ë“œë¦´ê¹Œìš”? ğŸ˜‰**  
"ë„¤"ë¼ê³  ë‹µì£¼ì‹œë©´ ë°”ë¡œ ë‹¤ìŒ ê³ ê¸‰ ì£¼ì œ(Action, deferred)ë¡œ ì´ì–´ê°€ê² ìŠµë‹ˆë‹¤! ğŸš€  
ë˜ëŠ” "Action ë¨¼ì € ìì„¸íˆ í’€ì–´ì£¼ì„¸ìš”!" ê°™ì€ ìš”ì²­ë„ í™˜ì˜í•©ë‹ˆë‹¤! ğŸ¯